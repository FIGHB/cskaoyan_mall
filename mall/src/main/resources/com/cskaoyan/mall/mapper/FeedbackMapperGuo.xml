<?xml version="1.0" encoding="UTF-8"?>
<!--国旭-->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cskaoyan.mall.mapper.FeedbackMapperGuo">
  <resultMap id="thisResultMap1" type="com.cskaoyan.mall.vo.FeedbackGuo">
    <id column="id" property="id"/>
    <result column="user_id" property="userId"/>
    <result column="username" property="username"/>
    <result column="mobile" property="mobile"/>
    <result column="feed_type" property="feedType"/>
    <result column="content" property="content"/>
    <result column="status" property="status"/>
    <result column="has_picture" property="hasPicture"/>
    <result column="pic_urls" property="picUrls" typeHandler="com.cskaoyan.mall.transfer.TransferToStringArrayHandler"/>
    <result column="add_time" property="addTime"/>
    <result column="update_time" property="updateTime"/>
    <result column="deleted" property="deleted"/>
  </resultMap>
  <select id="getFeedbackListBySreen" resultMap="thisResultMap1">
        select id, user_id, username, mobile, feed_type, content, status, has_picture, pic_urls, add_time, update_time, deleted
        from cskaoyan_mall_feedback where 1=1
        <choose>
          <when test="id!=null and username!=null">
            and id=#{id} and username like concat('%',#{username},'%')
          </when>
          <when test="id!=null and username==null">
            and id=#{id}
          </when>
          <otherwise>
            and username like concat('%',#{username},'%')
          </otherwise>
        </choose>
   </select>

  <resultMap id="thisResultMap" type="com.cskaoyan.mall.vo.FeedbackGuo">
    <id column="id" property="id"/>
    <result column="user_id" property="userId"/>
    <result column="username" property="username"/>
    <result column="mobile" property="mobile"/>
    <result column="feed_type" property="feedType"/>
    <result column="content" property="content"/>
    <result column="status" property="status"/>
    <result column="has_picture" property="hasPicture"/>
    <result column="pic_urls" property="picUrls"/>
    <result column="add_time" property="addTime"/>
    <result column="update_time" property="updateTime"/>
    <result column="deleted" property="deleted"/>
  </resultMap>
  <select id="getFeedbackList" resultMap="thisResultMap">
        select id, user_id, username, mobile, feed_type, content, status, has_picture, pic_urls, add_time, update_time, deleted
        from cskaoyan_mall_feedback
   </select>
</mapper>
